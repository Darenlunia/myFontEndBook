---
description: 细说浏览器输入URL后发生了什么。分为两个方面来说，一个是浏览器渲染方面，一个是计算机网络方面。
---

# URL输入后发生的事

{% embed url="https://juejin.im/post/5e32449d6fb9a02fe4581907" %}

简要说一下，主要阶段有以下五步：

* 域名解析，先迭代后递归
* 建立TCP链接，TCP三次握手+SSL握手
* 发送HTTP/HTTPS请求，服务器处理请求，返回响应结果
* 关闭TCP链接，四次挥手
* 浏览器渲染

每个阶段都可以展开详细说。

![](../../.gitbook/assets/tu-pian-%20%2822%29.png)

（先查找强缓存）域名解析，从域名到IP的DNS解析方案：（迭代）浏览器缓存-&gt;本地host文件-&gt;系统缓存-&gt;本地DNS服务器，（递归）根域名服务器-&gt;顶级域名服务器-&gt;主域名服务器。

建立TCP连接，首先判断是不是https的，如果是，则HTTPS其实是HTTP + SSL / TLS 两部分组成，也就是在HTTP上又加了一层处理加密信息的模块。服务端和客户端的信息传输都会通过TLS进行加密，所以传输的数据都是加密后的数据。三次握手：SYN-SYN/ACK-ACK 四次挥手：FIN-ACK-FIN/ACK-ACK

HTTP记得先判断缓存

渲染进程将 HTML 内容转换为能够读懂DOM 树结构。渲染引擎将 CSS 样式表转化为浏览器可以理解的styleSheets，计算出 DOM 节点的样式。创建布局树，并计算元素的布局信息。~~对布局树进行~~[~~分层~~](https://juejin.im/post/5da985fae51d4525292d3145#heading-4)~~，并生成分层树。为每个图层生成绘制列表，并将其提交到合成线程。合成线程将图层分图块，并栅格化将图块转换成位图。合成线程发送绘制图块命令给浏览器进程。~~浏览器进程根据指令生成页面，并显示到显示器上。

另一篇参考文献

{% embed url="http://47.98.159.95/my\_blog/browser-render/001.html\#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82" %}

当然还有一些“更全面”的答案，例如有人说第一步应该是浏览器匹配核对URL地址是否格式正确，最后一步应该是重排重绘等，这些相对琐碎的知识点就不写入，有需要再了解。

